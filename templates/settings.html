{% extends "base.html" %}

{% block content %}
<div class="card">
    <div class="card-header">
        <span>Email Settings</span>
    </div>
    <div class="card-body">
        <form method="post">
            <div class="form-group">
                <label for="email_provider">Email Provider</label>
                <select id="email_provider" name="email_provider">
                    <option value="gmail" {% if config.email_provider == 'gmail' %}selected{% endif %}>Gmail</option>
                    <option value="outlook" {% if config.email_provider == 'outlook' %}selected{% endif %}>Outlook / Microsoft 365</option>
                    <option value="yahoo" {% if config.email_provider == 'yahoo' %}selected{% endif %}>Yahoo Mail</option>
                    <option value="icloud" {% if config.email_provider == 'icloud' %}selected{% endif %}>iCloud Mail</option>
                    <option value="custom" {% if config.email_provider == 'custom' %}selected{% endif %}>Custom IMAP</option>
                </select>
            </div>

            <div class="form-group">
                <label for="email_user">Email Address</label>
                <input type="email" id="email_user" name="email_user" value="{{ config.email_user }}" placeholder="your.email@example.com">
            </div>

            <div class="form-group">
                <label for="email_password">App Password</label>
                <input type="password" id="email_password" name="email_password" value="{{ config.email_password }}" placeholder="xxxx xxxx xxxx xxxx">
                <small>Use an app-specific password, not your regular password.</small>
            </div>

            <div class="form-group">
                <label for="imap_server">IMAP Server (for custom only)</label>
                <input type="text" id="imap_server" name="imap_server" value="{{ config.imap_server or '' }}" placeholder="imap.example.com">
            </div>

            <div class="form-group">
                <label for="default_folder">Default Folder (for unknown cases)</label>
                <input type="text" id="default_folder" name="default_folder" value="{{ config.default_folder }}" placeholder="~/Documents/Legal/_UNROUTED">
            </div>

            <div style="margin-top: 24px;">
                <button type="submit" class="btn btn-primary">Save Settings</button>
                <a href="{{ url_for('index') }}" class="btn" style="margin-left: 8px;">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
